# 仕様変更時の影響範囲特定と変更管理

Webアプリ開発において、仕様変更は日常茶飯事です。しかし、安易な修正は「A機能を直したら関係のないB機能が壊れた」という**デグレード（先祖返り・品質退行）**を引き起こします。
優秀なテスターには、目に見える変更点だけでなく、システム全体に波及する「影響範囲」を論理的に読み解く力が求められます。

## 1. 影響範囲を特定するための3つの視点

仕様変更の影響を漏れなく洗い出すため、以下の3つのレイヤーで多角的に分析を行います。

### ① 機能・画面のつながり（表面的な影響）

仕様書や画面遷移図に基づき、ユーザーの操作フローに沿って直接的・間接的な関連性を確認します。

* **垂直方向の影響：** その機能自体の入力、バリデーション（入力チェック）、出力結果への影響。
* **水平方向の影響：** 前後の画面遷移、ボタンの活性/非活性状態の変化。
* **例：** 「図書の貸出上限冊数の変更」
* **直接：** 貸出実行ボタンの制御、エラーメッセージの内容。
* **間接：** マイページの「現在の貸出状況」、予約機能の「予約可能枠」への波及。

### ② データの裏側（構造的な影響）

データベース設計書（ER図）やAPI仕様書を確認し、データの整合性が保たれるかを分析します。

| 視点 | 調査内容 | リスクの例 |
| --- | --- | --- |
| **テーブル間リレーション** | ER図を参照し、変更対象のテーブルがどのテーブルと紐付いているかを確認。 | 貸出ステータスを削除した際、過去の統計データが参照不可になる。 |
| **データの整合性** | データの型、制約（NULL許可など）、デフォルト値の変化を確認。 | 数値型から文字列型への変更により、集計機能でシステムエラーが発生する。 |
| **共有モジュール** | 複数の機能で共通利用されているAPIや定数クラスを確認。 | 「ログイン共通処理」を直した結果、管理者画面までログイン不能になる。 |

### ③ 非機能要件への影響（品質的な影響）

機能が正しく動くかだけでなく、システムの「使い勝手」や「性能」への影響も忘れてはいけません。

* **パフォーマンスへの影響：** 検索条件の追加により、検索スピードが極端に落ちていないか。
* **セキュリティへの影響：** 権限チェックの変更により、他人のデータが見えてしまわないか。
* **互換性の影響：** スマホブラウザや古いOSでも同様に動作するか。

---

## 2. 変更管理と「インパクト分析」の実践

影響範囲を特定したら、それをテスト計画に落とし込む「インパクト分析」を行います。

### インパクト分析のステップ

1. **変更内容の正確な把握：** なぜこの変更が行われるのか（背景）を理解する。
2. **依存関係の可視化：** 上記の3つの視点から、影響を受ける箇所をリストアップする。
3. **リスク評価：** 影響度（壊れた時の被害）と発生確率（触る頻度）から、テストの優先順位を決める。
4. **回帰テスト（リグレッションテスト）の選定：** 全件テストは不可能なため、影響範囲に基づき「最低限通すべき既存機能」を絞り込む。

> **Pro Tip: トレーサビリティ（追跡可能性）**
> 仕様書、設計書、テストケースが紐付いている状態を「トレーサビリティが取れている」と言います。これができている現場では、仕様変更時に「どのテストケースを修正・実行すべきか」が瞬時に判断できます。

---

## 3. デグレードを防ぐためのテスターの動き

仕様変更の連絡を受けた際、テスターが取るべきアクションのチェックリストです。

* **「どこを変えたか」だけでなく「どこを変えていないか」を聞く**
  * 開発者が「ここは触っていない」と言った場所こそ、予期せぬ依存関係で壊れるリスクがあります。

* **古い仕様書との差分を明確にする**
  * 最新の仕様がどれか分からなくなる「仕様の迷子」を防ぎます。

* **境界値の再確認**
  * 「10個まで」が「20個まで」に変わった場合、10, 11, 20, 21といった境界付近の挙動を重点的に再テストします。

---
